<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ book.title }} - Detaylar</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <style>
        .bookdetail-wrapper {
            max-width: 1000px;
            margin: 20px auto 50px auto;
            padding: 30px;
            color: #fff;
            font-family: "Poppins", sans-serif;
        }

        .bookdetail-wrapper h1 {
            text-align: center;
            font-size: 32px;
            margin-bottom: 20px;
            color: #aa9028;
        }

        .bookdetail-card {
            background: rgba(0,0,0,0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            border: 1px solid rgba(255,255,255,0.2);
            box-shadow: 0 6px 25px rgba(0,0,0,0.3);
            text-align: center;
        }

        .bookdetail-card p {
            font-size: 16px;
            margin: 8px 0;
        }

        .notes-section {
            background: rgba(0,0,0,0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 20px;
            border: 1px solid rgba(255,255,255,0.2);
            box-shadow: 0 6px 25px rgba(0,0,0,0.3);
        }

        .notes-section h2 {
            text-align: center;
            margin-bottom: 20px;
            color: #aa9028;
        }

        .note-box {
            background: rgba(255,255,255,0.1);
            margin: 12px 0;
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 5px 12px rgba(0,0,0,0.1);
            font-size: 14px;
        }

        .note-box small {
            display: block;
            margin-top: 5px;
            color: #ccc;
        }

        a.back-btn {
            display: inline-block;
            margin: 15px auto 30px auto;
            padding: 10px 18px;
            background: #232323;
            color: #fff;
            text-decoration: none;
            font-size: 14px;
            border-radius: 8px;
            transition: 0.3s;
        }

        a.back-btn:hover {
            background: #444;
            color: #ffcc00;
        }
    </style>
</head>
<body>
    <div class="user-box">
    <div class="level-box">
        <!-- Kullanıcı adı ve level -->
        <p><strong>{{ user_box.username }} - Seviye {{ user_box.level }}</strong></p>

        <!-- Progress bar -->
        <div class="progress-bar">
            <div class="progress" id="progressBar"></div>
            <script>
                document.getElementById('progressBar').style.width = "{{ user_box.xp % 100 }}%";
            </script>
        </div>

        <!-- XP -->
        <small>{{ user_box.xp % 100 }}/100 XP</small>

        <!-- Unvan -->
        {% set titles = ['Acemi Okur', 'Kitap Kurdu', 'Usta Okur', 'Bilge Okur', 'Efsane Okur'] %}
        {% set title_index = ((user_box.level - 1) // 5) %}
        <p>Unvan: {{ titles[title_index if title_index < titles|length else -1] }}</p>
    </div>
</div>
    <a href="/logout" class="logout-btn">Çıkış Yap</a>
    <h1 class="page-title">Kitap Kayıt Sistemi</h1>
    <div class="tabs">
        <a href="/dashboard" class="tab-link">📊 Dashboard</a>
        <a href="/add_book" class="tab-link">➕ Kitap Ekle</a>
        <a href="/my_books" class="tab-link">📚 Kitaplarım</a>
        <a href="/library" class="tab-link">🌐 Kütüphane</a>
        <a href="/social" class="tab-link">👥 Sosyal</a>
        <a href="/leaderboard" class="tab-link">🏆 Liderlik Tablosu</a>
        <a href="/feed" class="tab-link">📰 Akış</a>
        <a href="/achievements" class="tab-link">🎖️ Başarımlar</a>
    </div>

    <div class="bookdetail-wrapper">
        <a href="{{ url_for('library') }}" class="back-btn">⬅️ Geri Dön</a>

        <div class="bookdetail-card">
            <h1>{{ book.title }}</h1>
            <p><strong>Yazar:</strong> {{ book.author }}</p>
            {% if book.page %}
                <p><strong>Sayfa Sayısı:</strong> {{ book.page }}</p>
            {% endif %}
        </div>

        <div class="notes-section">
    <h2 style="font-size: 40px;">Yorumlar</h2>
    {% if notes %}
        {% for note in notes %}
            <div class="note-box">
                {{ note.note }}
                <small>— {{ note.username }}</small>
            </div>
        {% endfor %}
    {% else %}
        <p>Henüz not eklenmemiş.</p>
    {% endif %}
</div>
    </div>
</body>
</html>
